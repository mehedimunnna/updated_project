#include <stdio.h>
#include <stdlib.h>

struct batsman {
    char name[25];
    int ones, twos, threes, fours, sixes, balls;
};

struct bowler {
    char name[25];
    int runsgv, wkttkn, overs;
};

void saveBatsmen(int m) {
    FILE *fp = fopen("batsmen.txt", "w");
    struct batsman b;

    for (int i = 0; i < m; i++) {
        printf("Enter name of batsman%d:\n", i+1);
        scanf("%s", b.name);
        printf("Enter number of ones, twos, threes, fours, sixes and balls:\n");
        scanf("%d %d %d %d %d %d", &b.ones, &b.twos, &b.threes, &b.fours, &b.sixes, &b.balls);
        fwrite(&b, sizeof(struct batsman), 1, fp);
    }

    fclose(fp);
}

void saveBowlers(int n) {
    FILE *fp = fopen("bowlers.txt", "w");
    struct bowler b;

    for (int i = 0; i < n; i++) {
        printf("Enter name of bowler%d:\n", i+1);
        scanf("%s", b.name);
        printf("Enter runs given, overs bowled and wickets taken:\n");
        scanf("%d %d %d", &b.runsgv, &b.overs, &b.wkttkn);
        fwrite(&b, sizeof(struct bowler), 1, fp);
    }

    fclose(fp);
}

void displayBatsmanDetail(int index) {
    FILE *fp = fopen("batsmen.txt", "r");
    struct batsman b;
    fseek(fp, index * sizeof(struct batsman), SEEK_SET);
    fread(&b, sizeof(struct batsman), 1, fp);
    int runs = b.ones + 2*b.twos + 3*b.threes + 4*b.fours + 6*b.sixes;
    float sr = (b.balls > 0) ? (runs * 100.0) / b.balls : 0;
    printf("                       Player Detail\n");
    printf("=============================================================\n");
    printf(" Batsman        runs  balls  fours  sixes   sr\n");
    printf("=============================================================\n");
    printf(" %-15s %-5d %-6d %-6d %-7d %.2f\n\n", b.name, runs, b.balls, b.fours, b.sixes, sr);
    fclose(fp);
}

void displayBowlerDetail(int index) {
    FILE *fp = fopen("bowlers.txt", "r");
    struct bowler b;
    fseek(fp, index * sizeof(struct bowler), SEEK_SET);
    fread(&b, sizeof(struct bowler), 1, fp);
    float econ = (b.overs > 0) ? (float)b.runsgv / b.overs : 0;
    printf("                         Player Detail\n");
    printf("===========================================================\n");
    printf(" Bowler         overs  runs  wickets  economy\n");
    printf("===========================================================\n");
    printf(" %-15s %-6d %-6d %-8d %.2f\n\n", b.name, b.overs, b.runsgv, b.wkttkn, econ);
    fclose(fp);
}

int main() {
    int m, n, choice, index;

    printf("Enter number of batsmen:\n");
    scanf("%d", &m);
    saveBatsmen(m);

    printf("Enter number of bowlers:\n");
    scanf("%d", &n);
    saveBowlers(n);

    do {
        printf("Enter the choice:\n");
        printf(" 1) Batsman detail\n 2) Bowler detail\n 3) Exit\n");
        scanf("%d", &choice);

        switch (choice) {
            case 1:
                printf("Enter the batsman number (1 to %d):\n", m);
                scanf("%d", &index);
                displayBatsmanDetail(index - 1);
                break;
            case 2:
                printf("Enter the bowler number (1 to %d):\n", n);
                scanf("%d", &index);
                displayBowlerDetail(index - 1);
                break;
            case 3:
                printf("Exiting...\n");
                break;
            default:
                printf("Invalid choice.\n");
        }
    } while (choice != 3);

    return 0;
}
